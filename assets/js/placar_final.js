document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("categoria-titulo");const e=document.getElementById("resultado-container");const a=document.getElementById("data-geracao");const n=document.getElementById("area-resultado");const o=()=>{const n=localStorage.getItem("dadosPlacarFinal");if(!n){document.title="placar_final";e.innerHTML="<p>Aguardando dados da página principal...</p>";return}const o=JSON.parse(n);document.title=`Resultado kata: ${o.categoria}`;e.innerHTML="";t.textContent=`${o.categoria}`;o.atletas.sort(((t,e)=>t.colocacao-e.colocacao));const c=document.createElement("table");c.innerHTML=`\n            <thead>\n                <tr>\n                    <th>Colocação</th>\n                    <th>Atleta</th>\n                    <th>Notas Válidas</th>\n                    <th>Total</th>\n                </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        `;const l=c.querySelector("tbody");o.atletas.forEach((t=>{const e=document.createElement("tr");let a="";if(t.colocacao===1)a="gold";else if(t.colocacao===2)a="silver";else if(t.colocacao===3)a="bronze";e.innerHTML=`\n                <td class="placement-cell ${a}">${t.colocacao}º</td>\n                <td class="atleta-nome-cell">${t.nome}</td>\n                <td class="notas-validas-cell">${t.notasValidas.join(" - ")}</td>\n                <td class="total-cell">${t.total.toFixed(1)}</td>\n            `;l.appendChild(e)}));e.appendChild(c);a.textContent=(new Date).toLocaleString("pt-BR")};window.addEventListener("storage",(t=>{if(t.key==="dadosPlacarFinal"){console.log("Dados recebidos da página principal. Atualizando placar...");o()}}));o();function c(t){if(!t||!t.area){n.textContent="Área: -";return}n.textContent=t.area}const l=localStorage.getItem("karatePlacarState");if(l){const t=JSON.parse(l);c(t)}window.addEventListener("storage",(t=>{if(t.key==="karatePlacarState"){const e=JSON.parse(t.newValue);c(e)}}))}));